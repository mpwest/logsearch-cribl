import LogSearch from '../logs/LogSearch'
import SearchCriteria from '../util/SearchCriteria'
import express from 'express'

const router = require("express").Router()

readLogs: async (req: express.Request, res: express.Response) => {
    let filename = req.query.fileName?.toString()
    if(!filename) {
        res.status(400).send()
    }
    let recordCount = parseInt(req.query.records?.toString() ?? process.env.defaultRecordCount ?? '0')
    let searchTerms = req.query.keyword as string[] ?? {}
    let searchAny = req.query.searchAny === 'true'

    let response = await new LogSearch().getLogs(filename!, recordCount, searchTerms, searchAny)
    res.send(response)
}
